# Level22Data.gd
extends Resource
class_name Level22Data

@export var level_name: String = "Level 22: Priority Encoder"
@export var available_gates: Array[String] = ["OR", "AND", "NOT"]
@export var input_values_i0: Array[int] = [1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]
@export var input_values_i1: Array[int] = [0,1,1,0,0,1,1,0,0,1,1,0,0,1,1,0]
@export var input_values_i2: Array[int] = [0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]
@export var input_values_i3: Array[int] = [0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1]
@export var expected_o0: Array[int] = [0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1]
@export var expected_o1: Array[int] = [0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1]

@export_multiline var theory_text: String = """[b]Уровень 22: Приоритетный шифратор[/b]

Что это: Улучшенный шифратор, который при наличии нескольких активных входов выбирает вход с наивысшим приоритетом.

[b]Приоритет:[/b] I3 (высший) > I2 > I1 > I0 (низший)

[b]Таблица истинности:[/b]
I3 I2 I1 I0 | O1 O0 | Выбранный вход | Объяснение
------------|-------|----------------|-----------
0  0  0  1  | 0  0  | I0             | Только I0 активен
0  0  1  0  | 0  1  | I1             | Только I1 активен
0  0  1  1  | 0  1  | I1             | I1 имеет приоритет над I0
0  1  0  0  | 1  0  | I2             | Только I2 активен
0  1  0  1  | 1  0  | I2             | I2 имеет приоритет над I0
0  1  1  0  | 1  0  | I2             | I2 имеет приоритет над I1
0  1  1  1  | 1  0  | I2             | I2 имеет приоритет над I1 и I0
1  0  0  0  | 1  1  | I3             | Только I3 активен
1  0  0  1  | 1  1  | I3             | I3 имеет приоритет над I0
1  0  1  0  | 1  1  | I3             | I3 имеет приоритет над I1
1  0  1  1  | 1  1  | I3             | I3 имеет приоритет над I1 и I0
1  1  0  0  | 1  1  | I3             | I3 имеет приоритет над I2
1  1  0  1  | 1  1  | I3             | I3 имеет приоритет над I2 и I0
1  1  1  0  | 1  1  | I3             | I3 имеет приоритет над I2 и I1
1  1  1  1  | 1  1  | I3             | I3 имеет приоритет над всеми

[b]Логические формулы:[/b]
O1 = I3 OR I2
O0 = I3 OR (I1 AND NOT I2)

[b]Схема решения:[/b]
I3 -----|       |
        | OR 1  |---- O1
I2 -----|_______|

I2 --|       |
     | NOT   |----|       |
     |_______|   |       |
                 | AND   |----|       |
I1 --------------|_______|   |       |
                             | OR 2  |---- O0
I3 --------------------------|_______|

[b]Что нужно сделать:[/b]
• Для O1: Соединить I3 и I2 через OR → O1
• Для O0:
  - Инвертировать I2 (через NOT)
  - Соединить I1 и инвертированный I2 через AND
  - Соединить результат AND с I3 через OR → O0

[b]Задача:[/b] Создайте приоритетный шифратор используя OR, AND и NOT вентили.
"""
