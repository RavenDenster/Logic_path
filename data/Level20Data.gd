extends Resource
class_name Level20Data

@export var level_name: String = "Level 20: 2-bit Comparator"
@export var available_gates: Array[String] = ["OneBitComparator", "AND", "OR"]
@export var input_values_a1: Array[int] = [0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1]
@export var input_values_a0: Array[int] = [0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1]
@export var input_values_b1: Array[int] = [0,0,1,1,0,0,1,1,0,0,1,1,0,0,1,1]
@export var input_values_b0: Array[int] = [0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1]

# ПРАВИЛЬНЫЕ ожидаемые значения для 2-битного компаратора
@export var expected_agtb: Array[int] = [0,0,0,0,1,0,0,0,1,1,0,0,1,1,1,0]  # A > B
@export var expected_altb: Array[int] = [0,1,1,1,0,0,1,1,0,0,0,1,0,0,0,0]  # A < B  
@export var expected_aeqb: Array[int] = [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]  # A == B

@export_multiline var theory_text: String = """[b]Уровень 20: 2-битный компаратор[/b]

Что это: Схема, которая сравнивает два двубитных числа A (A1,A0) и B (B1,B0).

[b]Что делает:[/b] Сравнивает многоразрядные числа по принципу "сначала старшие биты, потом младшие".

[b]Логика сравнения:[/b]
1. Сравниваем старшие биты A1 и B1:
   • Если A1 > B1 → A > B (завершаем)
   • Если A1 < B1 → A < B (завершаем) 
   • Если A1 = B1 → переходим к младшим битам

2. Сравниваем младшие биты A0 и B0:
   • Если A0 > B0 → A > B
   • Если A0 < B0 → A < B
   • Если A0 = B0 → A = B

[b]Формулы:[/b]
A>B = (A1 > B1) OR (A1 == B1 AND A0 > B0)
A<B = (A1 < B1) OR (A1 == B1 AND A0 < B0)  
A==B = (A1 == B1) AND (A0 == B0)

[b]Схема:[/b]
A1 -----|               |
B1 -----| 1-битный      |---- A1>B1
        | компаратор 1  |---- A1<B1
        |               |---- A1==B1
        |_______________|

A0 -----|               |
B0 -----| 1-битный      |---- A0>B0
        | компаратор 2  |---- A0<B0
        |               |---- A0==B0
        |_______________|

A1>B1 ------------------|       |
                        | OR    |---- A>B
A1==B1 ----|       |    |       |
           | AND   |----|_______|
A0>B0 -----|_______|

A1<B1 ------------------|       |
                        | OR    |---- A<B
A1==B1 ----|       |    |       |
           | AND   |----|_______|
A0<B0 -----|_______|

A1==B1 ----|       |
           | AND   |---- A==B
A0==B0 ----|_______|

[b]Что нужно для решения уровня:[/b]
• Взять два 1-битных компаратора:
  - Первый для A1,B1
  - Второй для A0,B0
• Собрать A>B: A1>B1 ИЛИ (A1==B1 И A0>B0) через OR и AND
• Собрать A<B: A1<B1 ИЛИ (A1==B1 И A0<B0) через OR и AND  
• Собрать A==B: A1==B1 И A0==B0 через AND

[b]Задача:[/b] Создайте 2-битный компаратор используя 1-битные компараторы, AND и OR вентили.
"""
